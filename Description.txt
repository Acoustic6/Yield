This is a compiler's version of yield return from previous commit.